{
   "nodes":{
      "portfolio-node":{
         "CONDITION":{
            "CONDITION":[
               {
                  "COLUMN":{
                     "ALIAS":"Aggregation",
                     "COLNAME":"recid"
                  },
                  "OPERATION":"IS NOT",
                  "VALUE":"NULL",
                  "_type":"EXPRESSION_SINGULAR"
               },
               {
                  "COLUMN":{
                     "ALIAS":"Aggregation",
                     "COLNAME":"CurrencyCode"
                  },
                  "OPERATION":"IS NOT",
                  "VALUE":"NULL",
                  "_type":"EXPRESSION_SINGULAR"
               }
            ],
            "COPULA":"AND"
         },
         "actions":{
            "param":{
               "paramLine":[
                  {
                     "param":[
                        {
                           "string":"SET",
                           "_name":"type"
                        },
                        {
                           "string":"PORTFOLIO",
                           "_name":"destinationTable"
                        },
                        {
                           "string":"cparty_id",
                           "_name":"destinationColumn"
                        },
                        {
                           "string":"$Aggregation.recid",
                           "_name":"sourceExpression"
                        },
                        {
                           "string":"",
                           "_name":"destinationCondition"
                        }
                     ],
                     "_id":"fdbbd347-dda2-4c84-9366-78a5aeb8b410"
                  },
                  {
                     "param":[
                        {
                           "string":"SET",
                           "_name":"type"
                        },
                        {
                           "string":"PORTFOLIO",
                           "_name":"destinationTable"
                        },
                        {
                           "string":"cparty_org_unit",
                           "_name":"destinationColumn"
                        },
                        {
                           "string":"$Aggregation.co_code",
                           "_name":"sourceExpression"
                        },
                        {
                           "string":"",
                           "_name":"destinationCondition"
                        }
                     ],
                     "_id":"242a2f5c-a42e-4c0d-9e44-80838c689e30"
                  },
                  {
                     "param":[
                        {
                           "string":"SET",
                           "_name":"type"
                        },
                        {
                           "string":"PORTFOLIO",
                           "_name":"destinationTable"
                        },
                        {
                           "string":"ult_parent_cparty_id",
                           "_name":"destinationColumn"
                        },
                        {
                           "string":"$Aggregation.recid",
                           "_name":"sourceExpression"
                        },
                        {
                           "string":"",
                           "_name":"destinationCondition"
                        }
                     ],
                     "_id":"5c1e34ab-6742-43c8-acdd-50d3332a1f95"
                  },
                  {
                     "param":[
                        {
                           "string":"SET",
                           "_name":"type"
                        },
                        {
                           "string":"PORTFOLIO",
                           "_name":"destinationTable"
                        },
                        {
                           "string":"cparty_name",
                           "_name":"destinationColumn"
                        },
                        {
                           "string":"CASE  WHEN $Aggregation.sector IN ('0095','0160') THEN $Aggregation.short_name @CONCAT_STR' '@CONCAT_STR $Aggregation.name_1 @CONCAT_STR' '@CONCAT_STR $Aggregation.name_alias  WHEN $Aggregation.sector NOT IN ('0095','0160') THEN $Aggregation.short_name ELSE NULL END",
                           "_name":"sourceExpression"
                        },
                        {
                           "string":"",
                           "_name":"destinationCondition"
                        }
                     ],
                     "_id":"48a7e9b4-519c-4b78-a8c9-4323c1f68f5e"
                  },
                  {
                     "param":[
                        {
                           "string":"SET",
                           "_name":"type"
                        },
                        {
                           "string":"PORTFOLIO",
                           "_name":"destinationTable"
                        },
                        {
                           "string":"dom_of_cparty",
                           "_name":"destinationColumn"
                        },
                        {
                           "string":"$Aggregation.residence",
                           "_name":"sourceExpression"
                        },
                        {
                           "string":"",
                           "_name":"destinationCondition"
                        }
                     ],
                     "_id":"d40a0f34-0b16-40c1-a22b-f0b006f25a0c"
                  },
                  {
                     "param":[
                        {
                           "string":"SET",
                           "_name":"type"
                        },
                        {
                           "string":"PORTFOLIO",
                           "_name":"destinationTable"
                        },
                        {
                           "string":"cparty_type",
                           "_name":"destinationColumn"
                        },
                        {
                           "string":"CASE WHEN $Aggregation.sector IN ('0005','0015') THEN 'BANK' WHEN $Aggregation.sector IN ('0001','0111') THEN 'CB' WHEN $Aggregation.sector IN ('0135','0366') THEN 'MDB_LISTED' WHEN $Aggregation.sector IN ('0010','0020', '0025', '0030', '0035', '0040', '0082', '0085', '0087', '0115', '0120', '0168', '0182', '0187', '0201', '0301', '0316', '0330', '0335', '0340') THEN 'NON_BANK_FIN_INST' WHEN $Aggregation.sector IN ('0045', '0067', '0068', '0071', '0073', '0074', '0075', '0080', '0081', '0083', '0084', '0086', '0088', '0089', '0090', '0091', '0092', '0093', '0094', '0096', '0097', '0098', '0099', '0101', '0102', '0103', '0104', '0105', '0140', '0166', '0167', '0169', '0200', '0202', '0203', '0205', '0206', '0208', '0209', '0210', '0211', '0212', '0214', '0215', '0216', '0218', '0300', '0302', '0303', '0304', '0305', '0306', '0308', '0309', '0310', '0311', '0312', '0314', '0315', '0367', '0368', '0373', '0374', '0375', '0381', '0384', '0390', '0391', '0392', '0394', '0394', '0396', '0398') THEN 'NON_FIN_CORP' WHEN $Aggregation.sector IN ('0069', '0070', '0100', '0170', '0171', '0207', '0307', '0365') THEN 'OTHER_LEGAL_ENTITIES' WHEN $Aggregation.sector IN ('0158') THEN 'PSE' WHEN $Aggregation.sector IN ('0095', '0160', '0213', '0217', '0313', '0317') THEN 'RETAIL' WHEN $Aggregation.sector IN ('0060', '0061', '0062', '0063', '0064', '0065', '0077', '0078', '0079', '0151', '0156', '0157', '0355', '0361', '0362', '0363', '0364') THEN 'RGVT' WHEN $Aggregation.sector IN ('0050', '0055', '0056', '0076', '0145', '0183', '0356', '0376') THEN 'SOV' WHEN $Aggregation.sector IN ('0110') THEN 'ECB' WHEN $Aggregation.sector IN ('0145') THEN 'EU' ELSE NULL END",
                           "_name":"sourceExpression"
                        },
                        {
                           "string":"",
                           "_name":"destinationCondition"
                        }
                     ],
                     "_id":"4dab6014-6e91-404f-bcda-423b3367cd8a"
                  },
                  {
                     "param":[
                        {
                           "string":"SET",
                           "_name":"type"
                        },
                        {
                           "string":"PORTFOLIO",
                           "_name":"destinationTable"
                        },
                        {
                           "string":"cparty_lei_code",
                           "_name":"destinationColumn"
                        },
                        {
                           "string":"'UNDEFINED'",
                           "_name":"sourceExpression"
                        },
                        {
                           "string":"",
                           "_name":"destinationCondition"
                        }
                     ],
                     "_id":"fee7e363-0801-433b-b9a4-60644542b441"
                  },
                  {
                     "param":[
                        {
                           "string":"SET",
                           "_name":"type"
                        },
                        {
                           "string":"PORTFOLIO",
                           "_name":"destinationTable"
                        },
                        {
                           "string":"ovrd_cparty_cqs_lt",
                           "_name":"destinationColumn"
                        },
                        {
                           "string":"NULL",
                           "_name":"sourceExpression"
                        },
                        {
                           "string":"",
                           "_name":"destinationCondition"
                        }
                     ],
                     "_id":"01a062a1-bafc-4c86-a073-e3cb0879eb88"
                  },
                  {
                     "param":[
                        {
                           "string":"SET",
                           "_name":"type"
                        },
                        {
                           "string":"PORTFOLIO",
                           "_name":"destinationTable"
                        },
                        {
                           "string":"ovrd_cparty_cqs_st",
                           "_name":"destinationColumn"
                        },
                        {
                           "string":"NULL",
                           "_name":"sourceExpression"
                        },
                        {
                           "string":"",
                           "_name":"destinationCondition"
                        }
                     ],
                     "_id":"f8fdc052-8989-4b98-b214-0bca8bc524c9"
                  },
                  {
                     "param":[
                        {
                           "string":"SET",
                           "_name":"type"
                        },
                        {
                           "string":"PORTFOLIO",
                           "_name":"destinationTable"
                        },
                        {
                           "string":"ovrd_risk_weight",
                           "_name":"destinationColumn"
                        },
                        {
                           "string":"NULL",
                           "_name":"sourceExpression"
                        },
                        {
                           "string":"",
                           "_name":"destinationCondition"
                        }
                     ],
                     "_id":"32a24622-b768-4cad-b725-255ab54be22a"
                  },
                  {
                     "param":[
                        {
                           "string":"SET",
                           "_name":"type"
                        },
                        {
                           "string":"PORTFOLIO",
                           "_name":"destinationTable"
                        },
                        {
                           "string":"central_institution_ind",
                           "_name":"destinationColumn"
                        },
                        {
                           "string":"NULL",
                           "_name":"sourceExpression"
                        },
                        {
                           "string":"",
                           "_name":"destinationCondition"
                        }
                     ],
                     "_id":"4d22a37e-19cc-473b-b3bb-80a054725663"
                  },
                  {
                     "param":[
                        {
                           "string":"SET",
                           "_name":"type"
                        },
                        {
                           "string":"PORTFOLIO",
                           "_name":"destinationTable"
                        },
                        {
                           "string":"institutional_network_ind",
                           "_name":"destinationColumn"
                        },
                        {
                           "string":"NULL",
                           "_name":"sourceExpression"
                        },
                        {
                           "string":"",
                           "_name":"destinationCondition"
                        }
                     ],
                     "_id":"36ba66fd-a561-48e1-b36b-c2184486b6d5"
                  },
                  {
                     "param":[
                        {
                           "string":"SET",
                           "_name":"type"
                        },
                        {
                           "string":"PORTFOLIO",
                           "_name":"destinationTable"
                        },
                        {
                           "string":"member_state_ind",
                           "_name":"destinationColumn"
                        },
                        {
                           "string":"CASE WHEN $Aggregation.residence IN ('AT','BE','BG','CY','CZ','DK','EE','FI','FR','DE','GR','HU','IE','IT','LV','LT','LU','MT','NL', 'PL','PT','RO','SK','SI','ES','SE') THEN 'Y' ELSE 'N' END",
                           "_name":"sourceExpression"
                        },
                        {
                           "string":"",
                           "_name":"destinationCondition"
                        }
                     ],
                     "_id":"2b1de9fb-e586-470d-82da-2631e0d800e2"
                  },
                  {
                     "param":[
                        {
                           "string":"SET",
                           "_name":"type"
                        },
                        {
                           "string":"PORTFOLIO",
                           "_name":"destinationTable"
                        },
                        {
                           "string":"promotional_lender_ind",
                           "_name":"destinationColumn"
                        },
                        {
                           "string":"'N'",
                           "_name":"sourceExpression"
                        },
                        {
                           "string":"",
                           "_name":"destinationCondition"
                        }
                     ],
                     "_id":"8ceaa06b-92ae-45e5-9b49-6e527f210117"
                  },
                  {
                     "param":[
                        {
                           "string":"SET",
                           "_name":"type"
                        },
                        {
                           "string":"PORTFOLIO",
                           "_name":"destinationTable"
                        },
                        {
                           "string":"protected_institution_ind",
                           "_name":"destinationColumn"
                        },
                        {
                           "string":"'N'",
                           "_name":"sourceExpression"
                        },
                        {
                           "string":"",
                           "_name":"destinationCondition"
                        }
                     ],
                     "_id":"70d38f3a-4b73-451e-98ae-523b03ec1270"
                  },
                  {
                     "param":[
                        {
                           "string":"SET",
                           "_name":"type"
                        },
                        {
                           "string":"PORTFOLIO",
                           "_name":"destinationTable"
                        },
                        {
                           "string":"ccp_ind",
                           "_name":"destinationColumn"
                        },
                        {
                           "string":"CASE WHEN $Aggregation.sector='0103' THEN 'Y' ELSE 'N' END",
                           "_name":"sourceExpression"
                        },
                        {
                           "string":"",
                           "_name":"destinationCondition"
                        }
                     ],
                     "_id":"6504c9df-4f1a-48c1-a558-0e8943287af5"
                  },
                  {
                     "param":[
                        {
                           "string":"SET",
                           "_name":"type"
                        },
                        {
                           "string":"PORTFOLIO",
                           "_name":"destinationTable"
                        },
                        {
                           "string":"preferential_treatment_ind",
                           "_name":"destinationColumn"
                        },
                        {
                           "string":"'N'",
                           "_name":"sourceExpression"
                        },
                        {
                           "string":"",
                           "_name":"destinationCondition"
                        }
                     ],
                     "_id":"6d12a103-f8d4-40d5-bec5-0cecc2e07518"
                  },
                  {
                     "param":[
                        {
                           "string":"SET",
                           "_name":"type"
                        },
                        {
                           "string":"PORTFOLIO",
                           "_name":"destinationTable"
                        },
                        {
                           "string":"regulated_ind",
                           "_name":"destinationColumn"
                        },
                        {
                           "string":"'N'",
                           "_name":"sourceExpression"
                        },
                        {
                           "string":"",
                           "_name":"destinationCondition"
                        }
                     ],
                     "_id":"545c4756-4fff-4ac2-b133-2abbdeb93b07"
                  },
                  {
                     "param":[
                        {
                           "string":"SET",
                           "_name":"type"
                        },
                        {
                           "string":"PORTFOLIO",
                           "_name":"destinationTable"
                        },
                        {
                           "string":"sme_ind",
                           "_name":"destinationColumn"
                        },
                        {
                           "string":"'N'",
                           "_name":"sourceExpression"
                        },
                        {
                           "string":"",
                           "_name":"destinationCondition"
                        }
                     ],
                     "_id":"ba3e6bbb-7554-4110-b049-a7b60e76b2f4"
                  },
                  {
                     "param":[
                        {
                           "string":"SET",
                           "_name":"type"
                        },
                        {
                           "string":"PORTFOLIO",
                           "_name":"destinationTable"
                        },
                        {
                           "string":"third_country_ind",
                           "_name":"destinationColumn"
                        },
                        {
                           "string":"'N'",
                           "_name":"sourceExpression"
                        },
                        {
                           "string":"",
                           "_name":"destinationCondition"
                        }
                     ],
                     "_id":"01520616-15c7-42d9-a880-fab9e06bba0e"
                  },
                  {
                     "param":[
                        {
                           "string":"SET",
                           "_name":"type"
                        },
                        {
                           "string":"PORTFOLIO",
                           "_name":"destinationTable"
                        },
                        {
                           "string":"dom_of_cparty_lcr_ind",
                           "_name":"destinationColumn"
                        },
                        {
                           "string":"CASE WHEN $Aggregation.residence IN ('DZ', 'AR', 'AU', 'AT', 'BE', 'BA', 'BR', 'BG', 'CA', 'CL', 'CN', 'CO', 'HR', 'CZ', 'DK', 'EE', 'FI', 'FR', 'DE', 'GR', 'HK', 'HU', 'IS', 'IN', 'ID', 'IE', 'IL', 'IT', 'JP', 'KR', 'LV', 'LT', 'LU', 'MY', 'MX', 'NL', 'NZ', 'MK', 'NO', 'PE', 'PH', 'PL', 'PT', 'RO', 'RU', 'SA', 'RS', 'SG', 'SK', 'SI', 'ZA', 'ES', 'SE', 'CH', 'TH', 'TR', 'AE', 'GB', 'US') THEN 'Y' ELSE 'N' END",
                           "_name":"sourceExpression"
                        },
                        {
                           "string":"",
                           "_name":"destinationCondition"
                        }
                     ],
                     "_id":"34a1678d-6e0b-44ec-8ee7-8b768d747078"
                  },
                  {
                     "param":[
                        {
                           "string":"SET",
                           "_name":"type"
                        },
                        {
                           "string":"PORTFOLIO",
                           "_name":"destinationTable"
                        },
                        {
                           "string":"ecb_equivalent_ind",
                           "_name":"destinationColumn"
                        },
                        {
                           "string":"'N'",
                           "_name":"sourceExpression"
                        },
                        {
                           "string":"",
                           "_name":"destinationCondition"
                        }
                     ],
                     "_id":"8b14eeee-8ea5-4f8c-a4e2-e3aef420667b"
                  },
                  {
                     "param":[
                        {
                           "string":"SET",
                           "_name":"type"
                        },
                        {
                           "string":"PORTFOLIO",
                           "_name":"destinationTable"
                        },
                        {
                           "string":"org_unit",
                           "_name":"destinationColumn"
                        },
                        {
                           "string":"$Aggregation.co_code",
                           "_name":"sourceExpression"
                        },
                        {
                           "string":"",
                           "_name":"destinationCondition"
                        }
                     ],
                     "_id":"6d6bc314-cd79-4bc4-8483-35f6af89066d"
                  },
                  {
                     "param":[
                        {
                           "string":"SET",
                           "_name":"type"
                        },
                        {
                           "string":"PORTFOLIO",
                           "_name":"destinationTable"
                        },
                        {
                           "string":"dom_of_cparty_ccy",
                           "_name":"destinationColumn"
                        },
                        {
                           "string":"$Aggregation.CurrencyCode",
                           "_name":"sourceExpression"
                        },
                        {
                           "string":"",
                           "_name":"destinationCondition"
                        }
                     ],
                     "_id":"aa06e80f-bdc0-426b-a9b6-00259c02b750"
                  },
                  {
                     "param":[
                        {
                           "string":"SET",
                           "_name":"type"
                        },
                        {
                           "string":"PORTFOLIO",
                           "_name":"destinationTable"
                        },
                        {
                           "string":"business_line",
                           "_name":"destinationColumn"
                        },
                        {
                           "string":"CASE WHEN $Aggregation.co_code = 'ES0010073' THEN 'Open Bank S.A' ELSE 'Open Bank S.A' END",
                           "_name":"sourceExpression"
                        },
                        {
                           "string":"",
                           "_name":"destinationCondition"
                        }
                     ],
                     "_id":"2f52b9f1-f9fb-430c-9b6e-6143808705bc"
                  }
               ],
               "_name":"actions"
            },
            "_id":"8b7fb30a-6100-4fa7-89c0-58b3ffbeb579"
         },
         "models":{
            "model":"ae_allocation:ae_calc:liq_calc:liq_mbr:liq_params:ref_data:Data_Enrichment_ESP:Data_Enrichment:Aggregation[CUSTOMER]"
         },
         "_comment":"",
         "_description":"",
         "_docFile":"",
         "_expandedConditionsIncludeInherited":"false",
         "_expandedConditionsModel":"",
         "_id":"",
         "_name":"CounterpartyCalc_Input"
      }
   }
}