{
   "nodes":{
      "parameterNode":{
         "parameterNode":[
            {
               "parameterNode":{
                  "parameters":{
                     "param":{
                        "paramLine":{
                           "param":[
                              {
                                 "string":"ModifyModel[ENRICHED_counterparty].Data_Enrichment_ESP:Data_Enrichment:Aggregation[CUSTOMER]",
                                 "_name":"model"
                              },
                              {
                                 "string":"$Aggregation.recid",
                                 "_name":"expression"
                              },
                              {
                                 "string":"VARCHAR",
                                 "_name":"valueType"
                              }
                           ],
                           "_id":"ModifyModel[e1c5db5e-eee3-49af-815b-1e55f10369b3].39ebf5a6-ff24-4013-baec-b58bfc330b4c:1098bf52-59b8-43d3-8b1b-c82088c0b255:Aggregation[297fe31c-be92-4aec-8362-dd3241e22ceb]"
                        },
                        "_name":"fieldMapping"
                     },
                     "_id":"3fe1f0cb-ae17-4992-aeb6-1afd60b45404"
                  },
                  "_name":"id",
                  "_type":"fieldMappingNode"
               },
               "_name":"Details Mapping",
               "_type":"detailGroup"
            },
            {
               "parameterNode":[
                  {
                     "parameters":{
                        "param":{
                           "paramLine":{
                              "param":[
                                 {
                                    "string":"ModifyModel[ENRICHED_counterparty].Data_Enrichment_ESP:Data_Enrichment:Aggregation[CUSTOMER]",
                                    "_name":"model"
                                 },
                                 {
                                    "string":"$Aggregation.legal_id",
                                    "_name":"expression"
                                 },
                                 {
                                    "string":"VARCHAR",
                                    "_name":"valueType"
                                 }
                              ],
                              "_id":"ModifyModel[e1c5db5e-eee3-49af-815b-1e55f10369b3].39ebf5a6-ff24-4013-baec-b58bfc330b4c:1098bf52-59b8-43d3-8b1b-c82088c0b255:Aggregation[297fe31c-be92-4aec-8362-dd3241e22ceb]"
                           },
                           "_name":"fieldMapping"
                        },
                        "_id":"3f13f83c-5f2b-4908-9cf8-cf54c415bdf1"
                     },
                     "_name":"cptyOrgUnitId",
                     "_type":"fieldMappingNode"
                  },
                  {
                     "parameters":{
                        "param":{
                           "paramLine":{
                              "param":[
                                 {
                                    "string":"ModifyModel[ENRICHED_counterparty].Data_Enrichment_ESP:Data_Enrichment:Aggregation[CUSTOMER]",
                                    "_name":"model"
                                 },
                                 {
                                    "string":"CASE \t WHEN $Aggregation.customer_status IN ('3','4','5','22') THEN $Aggregation.short_name WHEN $Aggregation.customer_status IN ('1','2') THEN @CONCAT_STR($Aggregation.short_name, ' ', $Aggregation.name_1, ' ', $Aggregation.name_alias)  \tELSE 'N/A'   END",
                                    "_name":"expression"
                                 },
                                 {
                                    "string":"VARCHAR",
                                    "_name":"valueType"
                                 },
                                 {
                                    "_name":"valueSize",
                                    "__text":"100"
                                 },
                                 {
                                    "false":"",
                                    "_name":"valueNullable"
                                 }
                              ],
                              "_id":"ModifyModel[e1c5db5e-eee3-49af-815b-1e55f10369b3].39ebf5a6-ff24-4013-baec-b58bfc330b4c:1098bf52-59b8-43d3-8b1b-c82088c0b255:Aggregation[297fe31c-be92-4aec-8362-dd3241e22ceb]"
                           },
                           "_name":"fieldMapping"
                        },
                        "_id":"8c105771-89e8-4c1e-b96b-ae4b25215342"
                     },
                     "_name":"name",
                     "_type":"fieldMappingNode"
                  },
                  {
                     "parameters":{
                        "param":{
                           "paramLine":{
                              "param":[
                                 {
                                    "string":"ModifyModel[ENRICHED_counterparty].Data_Enrichment_ESP:Data_Enrichment:Aggregation[CUSTOMER]",
                                    "_name":"model"
                                 },
                                 {
                                    "string":"$Residence.ISOCode3",
                                    "_name":"expression"
                                 },
                                 {
                                    "string":"VARCHAR",
                                    "_name":"valueType"
                                 }
                              ],
                              "_id":"ModifyModel[e1c5db5e-eee3-49af-815b-1e55f10369b3].39ebf5a6-ff24-4013-baec-b58bfc330b4c:1098bf52-59b8-43d3-8b1b-c82088c0b255:Aggregation[297fe31c-be92-4aec-8362-dd3241e22ceb]"
                           },
                           "_name":"fieldMapping"
                        },
                        "_id":"938b131b-be23-4cf8-b7ee-e2745e8965f6"
                     },
                     "_name":"lkupResidence",
                     "_type":"fieldMappingNode"
                  },
                  {
                     "parameters":{
                        "param":{
                           "paramLine":{
                              "param":[
                                 {
                                    "string":"ModifyModel[ENRICHED_counterparty].Data_Enrichment_ESP:Data_Enrichment:Aggregation[CUSTOMER]",
                                    "_name":"model"
                                 },
                                 {
                                    "string":"$Nationality.ISOCode3",
                                    "_name":"expression"
                                 },
                                 {
                                    "string":"VARCHAR",
                                    "_name":"valueType"
                                 }
                              ],
                              "_id":"ModifyModel[e1c5db5e-eee3-49af-815b-1e55f10369b3].39ebf5a6-ff24-4013-baec-b58bfc330b4c:1098bf52-59b8-43d3-8b1b-c82088c0b255:Aggregation[297fe31c-be92-4aec-8362-dd3241e22ceb]"
                           },
                           "_name":"fieldMapping"
                        },
                        "_id":"dad94378-4f05-44b9-986b-b956c2b53690"
                     },
                     "_name":"lkupNationality",
                     "_type":"fieldMappingNode"
                  },
                  {
                     "parameters":{
                        "param":{
                           "paramLine":{
                              "param":[
                                 {
                                    "string":"ModifyModel[ENRICHED_counterparty].Data_Enrichment_ESP:Data_Enrichment:Aggregation[CUSTOMER]",
                                    "_name":"model"
                                 },
                                 {
                                    "string":"$Sector.code",
                                    "_name":"expression"
                                 },
                                 {
                                    "string":"VARCHAR",
                                    "_name":"valueType"
                                 }
                              ],
                              "_id":"ModifyModel[e1c5db5e-eee3-49af-815b-1e55f10369b3].39ebf5a6-ff24-4013-baec-b58bfc330b4c:1098bf52-59b8-43d3-8b1b-c82088c0b255:Aggregation[297fe31c-be92-4aec-8362-dd3241e22ceb]"
                           },
                           "_name":"fieldMapping"
                        },
                        "_id":"c76f48a0-c313-448e-b25f-bd9a53b4d407"
                     },
                     "_name":"lkupSector",
                     "_type":"fieldMappingNode"
                  },
                  {
                     "parameters":{
                        "param":{
                           "paramLine":{
                              "param":[
                                 {
                                    "string":"ModifyModel[ENRICHED_counterparty].Data_Enrichment_ESP:Data_Enrichment:Aggregation[CUSTOMER]",
                                    "_name":"model"
                                 },
                                 {
                                    "string":"$Sector.code",
                                    "_name":"expression"
                                 },
                                 {
                                    "string":"VARCHAR",
                                    "_name":"valueType"
                                 }
                              ],
                              "_id":"ModifyModel[e1c5db5e-eee3-49af-815b-1e55f10369b3].39ebf5a6-ff24-4013-baec-b58bfc330b4c:1098bf52-59b8-43d3-8b1b-c82088c0b255:Aggregation[297fe31c-be92-4aec-8362-dd3241e22ceb]"
                           },
                           "_name":"fieldMapping"
                        },
                        "_id":"ec2f92d3-ca60-4732-be97-80c1ea350315"
                     },
                     "_name":"lkupSectorOfUltimateRisk",
                     "_type":"fieldMappingNode"
                  },
                  {
                     "parameters":{
                        "param":{
                           "paramLine":{
                              "param":[
                                 {
                                    "string":"ModifyModel[ENRICHED_counterparty].Data_Enrichment_ESP:Data_Enrichment:Aggregation[CUSTOMER]",
                                    "_name":"model"
                                 },
                                 {
                                    "string":"$Residence.ISOCode3",
                                    "_name":"expression"
                                 },
                                 {
                                    "string":"VARCHAR",
                                    "_name":"valueType"
                                 }
                              ],
                              "_id":"ModifyModel[e1c5db5e-eee3-49af-815b-1e55f10369b3].39ebf5a6-ff24-4013-baec-b58bfc330b4c:1098bf52-59b8-43d3-8b1b-c82088c0b255:Aggregation[297fe31c-be92-4aec-8362-dd3241e22ceb]"
                           },
                           "_name":"fieldMapping"
                        },
                        "_id":"7c412b8b-9a50-4694-9780-32e103ad9dc4"
                     },
                     "_name":"lkupCountryOfUltimateRisk",
                     "_type":"fieldMappingNode"
                  },
                  {
                     "parameters":{
                        "param":{
                           "paramLine":{
                              "param":[
                                 {
                                    "string":"ModifyModel[ENRICHED_counterparty].Data_Enrichment_ESP:Data_Enrichment:Aggregation[CUSTOMER]",
                                    "_name":"model"
                                 },
                                 {
                                    "string":"CASE WHEN $Industry.ob_code IS NULL THEN 'na' ELSE $Industry.code END",
                                    "_name":"expression"
                                 },
                                 {
                                    "string":"VARCHAR",
                                    "_name":"valueType"
                                 },
                                 {
                                    "_name":"valueSize",
                                    "__text":"100"
                                 },
                                 {
                                    "false":"",
                                    "_name":"valueNullable"
                                 }
                              ],
                              "_id":"ModifyModel[e1c5db5e-eee3-49af-815b-1e55f10369b3].39ebf5a6-ff24-4013-baec-b58bfc330b4c:1098bf52-59b8-43d3-8b1b-c82088c0b255:Aggregation[297fe31c-be92-4aec-8362-dd3241e22ceb]"
                           },
                           "_name":"fieldMapping"
                        },
                        "_id":"5fa49393-1f72-4632-974e-b0d80941370a"
                     },
                     "_name":"lkupIndustry",
                     "_type":"fieldMappingNode"
                  },
                  {
                     "parameters":{
                        "param":{
                           "paramLine":{
                              "param":[
                                 {
                                    "string":"ModifyModel[ENRICHED_counterparty].Data_Enrichment_ESP:Data_Enrichment:Aggregation[CUSTOMER]",
                                    "_name":"model"
                                 },
                                 {
                                    "string":"'na'",
                                    "_name":"expression"
                                 },
                                 {
                                    "string":"VARCHAR",
                                    "_name":"valueType"
                                 },
                                 {
                                    "_name":"valueSize",
                                    "__text":"10"
                                 },
                                 {
                                    "false":"",
                                    "_name":"valueNullable"
                                 }
                              ],
                              "_id":"ModifyModel[e1c5db5e-eee3-49af-815b-1e55f10369b3].39ebf5a6-ff24-4013-baec-b58bfc330b4c:1098bf52-59b8-43d3-8b1b-c82088c0b255:Aggregation[297fe31c-be92-4aec-8362-dd3241e22ceb]"
                           },
                           "_name":"fieldMapping"
                        },
                        "_id":"67806713-87e1-4a7e-b883-8004843518d4"
                     },
                     "_name":"lkupSize",
                     "_type":"fieldMappingNode"
                  },
                  {
                     "parameters":{
                        "param":{
                           "paramLine":{
                              "param":[
                                 {
                                    "string":"ModifyModel[ENRICHED_counterparty].Data_Enrichment_ESP:Data_Enrichment:Aggregation[CUSTOMER]",
                                    "_name":"model"
                                 },
                                 {
                                    "string":"CASE WHEN $Aggregation.sector IN ('0084', '0086',' 0384') THEN 'yes' else 'no' END",
                                    "_name":"expression"
                                 },
                                 {
                                    "string":"VARCHAR",
                                    "_name":"valueType"
                                 },
                                 {
                                    "_name":"valueSize",
                                    "__text":"10"
                                 },
                                 {
                                    "false":"",
                                    "_name":"valueNullable"
                                 }
                              ],
                              "_id":"ModifyModel[e1c5db5e-eee3-49af-815b-1e55f10369b3].39ebf5a6-ff24-4013-baec-b58bfc330b4c:1098bf52-59b8-43d3-8b1b-c82088c0b255:Aggregation[297fe31c-be92-4aec-8362-dd3241e22ceb]"
                           },
                           "_name":"fieldMapping"
                        },
                        "_id":"5b47f249-89dd-47d9-842c-49f2cee14538"
                     },
                     "_name":"lkupIsSPV",
                     "_type":"fieldMappingNode"
                  },
                  {
                     "parameters":{
                        "param":{
                           "paramLine":{
                              "param":[
                                 {
                                    "string":"ModifyModel[ENRICHED_counterparty].Data_Enrichment_ESP:Data_Enrichment:Aggregation[CUSTOMER]",
                                    "_name":"model"
                                 },
                                 {
                                    "string":"'na'",
                                    "_name":"expression"
                                 },
                                 {
                                    "string":"VARCHAR",
                                    "_name":"valueType"
                                 },
                                 {
                                    "_name":"valueSize",
                                    "__text":"10"
                                 },
                                 {
                                    "false":"",
                                    "_name":"valueNullable"
                                 }
                              ],
                              "_id":"ModifyModel[e1c5db5e-eee3-49af-815b-1e55f10369b3].39ebf5a6-ff24-4013-baec-b58bfc330b4c:1098bf52-59b8-43d3-8b1b-c82088c0b255:Aggregation[297fe31c-be92-4aec-8362-dd3241e22ceb]"
                           },
                           "_name":"fieldMapping"
                        },
                        "_id":"758c1547-849b-47a1-9897-baf141124196"
                     },
                     "_name":"lkupIsCentralCounterparty",
                     "_type":"fieldMappingNode"
                  },
                  {
                     "parameters":{
                        "param":{
                           "paramLine":{
                              "param":[
                                 {
                                    "string":"ModifyModel[ENRICHED_counterparty].Data_Enrichment_ESP:Data_Enrichment:Aggregation[CUSTOMER]",
                                    "_name":"model"
                                 },
                                 {
                                    "string":"CASE WHEN $Aggregation.sector IN ('0001', '0005', '0010', '0015', '0020', '0025', '0110', '0111', '0115', '0120') THEN 'yes' ELSE 'no' END",
                                    "_name":"expression"
                                 },
                                 {
                                    "string":"VARCHAR",
                                    "_name":"valueType"
                                 },
                                 {
                                    "_name":"valueSize",
                                    "__text":"10"
                                 },
                                 {
                                    "false":"",
                                    "_name":"valueNullable"
                                 }
                              ],
                              "_id":"ModifyModel[e1c5db5e-eee3-49af-815b-1e55f10369b3].39ebf5a6-ff24-4013-baec-b58bfc330b4c:1098bf52-59b8-43d3-8b1b-c82088c0b255:Aggregation[297fe31c-be92-4aec-8362-dd3241e22ceb]"
                           },
                           "_name":"fieldMapping"
                        },
                        "_id":"02fe7e91-ef5c-446d-b172-ba7de5eb9b27"
                     },
                     "_name":"lkupIsMMRMFI",
                     "_type":"fieldMappingNode"
                  },
                  {
                     "parameters":{
                        "param":{
                           "paramLine":{
                              "param":[
                                 {
                                    "string":"ModifyModel[ENRICHED_counterparty].Data_Enrichment_ESP:Data_Enrichment:Aggregation[CUSTOMER]",
                                    "_name":"model"
                                 },
                                 {
                                    "string":"'na'",
                                    "_name":"expression"
                                 },
                                 {
                                    "string":"VARCHAR",
                                    "_name":"valueType"
                                 },
                                 {
                                    "_name":"valueSize",
                                    "__text":"10"
                                 },
                                 {
                                    "false":"",
                                    "_name":"valueNullable"
                                 }
                              ],
                              "_id":"ModifyModel[e1c5db5e-eee3-49af-815b-1e55f10369b3].39ebf5a6-ff24-4013-baec-b58bfc330b4c:1098bf52-59b8-43d3-8b1b-c82088c0b255:Aggregation[297fe31c-be92-4aec-8362-dd3241e22ceb]"
                           },
                           "_name":"fieldMapping"
                        },
                        "_id":"cfa04850-6d80-4446-9d78-3abe738ca52d"
                     },
                     "_name":"lkupIsKeyManagement",
                     "_type":"fieldMappingNode"
                  },
                  {
                     "parameters":{
                        "param":{
                           "paramLine":{
                              "param":[
                                 {
                                    "string":"ModifyModel[ENRICHED_counterparty].Data_Enrichment_ESP:Data_Enrichment:Aggregation[CUSTOMER]",
                                    "_name":"model"
                                 },
                                 {
                                    "string":"'na'",
                                    "_name":"expression"
                                 },
                                 {
                                    "string":"VARCHAR",
                                    "_name":"valueType"
                                 },
                                 {
                                    "_name":"valueSize",
                                    "__text":"10"
                                 },
                                 {
                                    "false":"",
                                    "_name":"valueNullable"
                                 }
                              ],
                              "_id":"ModifyModel[e1c5db5e-eee3-49af-815b-1e55f10369b3].39ebf5a6-ff24-4013-baec-b58bfc330b4c:1098bf52-59b8-43d3-8b1b-c82088c0b255:Aggregation[297fe31c-be92-4aec-8362-dd3241e22ceb]"
                           },
                           "_name":"fieldMapping"
                        },
                        "_id":"db615e44-8513-484e-87c0-7ff5ff969a36"
                     },
                     "_name":"lkupIsOtherRelatedParty",
                     "_type":"fieldMappingNode"
                  },
                  {
                     "parameters":{
                        "param":{
                           "paramLine":{
                              "param":[
                                 {
                                    "string":"ModifyModel[ENRICHED_counterparty].Data_Enrichment_ESP:Data_Enrichment:Aggregation[CUSTOMER]",
                                    "_name":"model"
                                 },
                                 {
                                    "string":"'na'",
                                    "_name":"expression"
                                 },
                                 {
                                    "string":"VARCHAR",
                                    "_name":"valueType"
                                 },
                                 {
                                    "_name":"valueSize",
                                    "__text":"10"
                                 },
                                 {
                                    "false":"",
                                    "_name":"valueNullable"
                                 }
                              ],
                              "_id":"ModifyModel[e1c5db5e-eee3-49af-815b-1e55f10369b3].39ebf5a6-ff24-4013-baec-b58bfc330b4c:1098bf52-59b8-43d3-8b1b-c82088c0b255:Aggregation[297fe31c-be92-4aec-8362-dd3241e22ceb]"
                           },
                           "_name":"fieldMapping"
                        },
                        "_id":"241287f9-004f-47d6-ace2-3a89fa0abc59"
                     },
                     "_name":"custom1",
                     "_type":"fieldMappingNode"
                  },
                  {
                     "parameters":{
                        "param":{
                           "paramLine":{
                              "param":[
                                 {
                                    "string":"ModifyModel[ENRICHED_counterparty].Data_Enrichment_ESP:Data_Enrichment:Aggregation[CUSTOMER]",
                                    "_name":"model"
                                 },
                                 {
                                    "string":"'na'",
                                    "_name":"expression"
                                 },
                                 {
                                    "string":"VARCHAR",
                                    "_name":"valueType"
                                 },
                                 {
                                    "_name":"valueSize",
                                    "__text":"10"
                                 },
                                 {
                                    "false":"",
                                    "_name":"valueNullable"
                                 }
                              ],
                              "_id":"ModifyModel[e1c5db5e-eee3-49af-815b-1e55f10369b3].39ebf5a6-ff24-4013-baec-b58bfc330b4c:1098bf52-59b8-43d3-8b1b-c82088c0b255:Aggregation[297fe31c-be92-4aec-8362-dd3241e22ceb]"
                           },
                           "_name":"fieldMapping"
                        },
                        "_id":"87f407e5-096f-49b2-aa36-753d775ac1af"
                     },
                     "_name":"custom2",
                     "_type":"fieldMappingNode"
                  },
                  {
                     "parameters":{
                        "param":{
                           "paramLine":{
                              "param":[
                                 {
                                    "string":"ModifyModel[ENRICHED_counterparty].Data_Enrichment_ESP:Data_Enrichment:Aggregation[CUSTOMER]",
                                    "_name":"model"
                                 },
                                 {
                                    "string":"'na'",
                                    "_name":"expression"
                                 },
                                 {
                                    "string":"VARCHAR",
                                    "_name":"valueType"
                                 },
                                 {
                                    "_name":"valueSize",
                                    "__text":"10"
                                 },
                                 {
                                    "false":"",
                                    "_name":"valueNullable"
                                 }
                              ],
                              "_id":"ModifyModel[e1c5db5e-eee3-49af-815b-1e55f10369b3].39ebf5a6-ff24-4013-baec-b58bfc330b4c:1098bf52-59b8-43d3-8b1b-c82088c0b255:Aggregation[297fe31c-be92-4aec-8362-dd3241e22ceb]"
                           },
                           "_name":"fieldMapping"
                        },
                        "_id":"edca5e7d-f118-4899-8c4c-0a4f81c3731d"
                     },
                     "_name":"custom3",
                     "_type":"fieldMappingNode"
                  },
                  {
                     "parameters":{
                        "param":{
                           "paramLine":{
                              "param":[
                                 {
                                    "string":"ModifyModel[ENRICHED_counterparty].Data_Enrichment_ESP:Data_Enrichment:Aggregation[CUSTOMER]",
                                    "_name":"model"
                                 },
                                 {
                                    "string":"'Madrid'",
                                    "_name":"expression"
                                 },
                                 {
                                    "string":"VARCHAR",
                                    "_name":"valueType"
                                 },
                                 {
                                    "_name":"valueSize",
                                    "__text":"10"
                                 },
                                 {
                                    "false":"",
                                    "_name":"valueNullable"
                                 }
                              ],
                              "_id":"ModifyModel[e1c5db5e-eee3-49af-815b-1e55f10369b3].39ebf5a6-ff24-4013-baec-b58bfc330b4c:1098bf52-59b8-43d3-8b1b-c82088c0b255:Aggregation[297fe31c-be92-4aec-8362-dd3241e22ceb]"
                           },
                           "_name":"fieldMapping"
                        },
                        "_id":"ed86e4df-7f6f-4928-958b-15cc7b4b2e2c"
                     },
                     "_name":"lkupResidenceProvince",
                     "_type":"fieldMappingNode"
                  },
                  {
                     "parameters":{
                        "param":{
                           "paramLine":{
                              "param":[
                                 {
                                    "string":"ModifyModel[ENRICHED_counterparty].Data_Enrichment_ESP:Data_Enrichment:Aggregation[CUSTOMER]",
                                    "_name":"model"
                                 },
                                 {
                                    "string":"CASE WHEN $Aggregation.sector IN ('0071','0212','0312','0367') THEN 'yes' ELSE 'no' END",
                                    "_name":"expression"
                                 },
                                 {
                                    "string":"VARCHAR",
                                    "_name":"valueType"
                                 },
                                 {
                                    "_name":"valueSize",
                                    "__text":"10"
                                 },
                                 {
                                    "false":"",
                                    "_name":"valueNullable"
                                 }
                              ],
                              "_id":"ModifyModel[e1c5db5e-eee3-49af-815b-1e55f10369b3].39ebf5a6-ff24-4013-baec-b58bfc330b4c:1098bf52-59b8-43d3-8b1b-c82088c0b255:Aggregation[297fe31c-be92-4aec-8362-dd3241e22ceb]"
                           },
                           "_name":"fieldMapping"
                        },
                        "_id":"da491bcf-e4f1-450e-af6a-b7ffb801fe1e"
                     },
                     "_name":"lkupIsHoldingCompany",
                     "_type":"fieldMappingNode"
                  }
               ],
               "_name":"Calculated Fields Mapping",
               "_type":"calcGroup"
            }
         ],
         "_name":"Mapping",
         "_type":"rootMappingNode"
      }
   }
}